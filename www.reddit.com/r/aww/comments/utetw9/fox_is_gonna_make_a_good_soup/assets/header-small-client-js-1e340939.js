import{M as e,_ as t,n as l,f as s,s as i,as as o,ar as a,at as n,au as h,t as r,$ as d,a as c,y as u}from"./shell-f8d273fb.js";import{w as m}from"./ready-marks-cdb25011.js";const v=e(s(i));let g=class extends v{constructor(){super(...arguments),this.menuButton=null,this.menuDialog=null,this.searchButton=null,this.searchDialogCloseButton=null,this.searchDialog=null,this.shredditInteractableElement=null,this.closeMenu=()=>{this.menuDialog&&this.menuDialog.open&&(this.menuDialog.close(),this.reset())},this.handleClickMenu=()=>{this.menuDialog&&(this.menuDialog.open?(this.menuDialog.close(),this.reset()):(this.menuDialog.show(),this.blockPageScrolling({node:o()})),this.trackEvent(a()))},this.focusOnSearchInput=()=>{var e,t,l;const s=null===(l=null===(t=null===(e=this.searchDialog)||void 0===e?void 0:e.querySelector("reddit-search-small"))||void 0===t?void 0:t.shadowRoot)||void 0===l?void 0:l.querySelector("input[type=search]");s&&((e,t=0)=>{const l=document.createElement("input");l.style.position="absolute",l.style.left="0",l.style.top=e.getBoundingClientRect().top+document.documentElement.scrollTop-15+"px",l.style.opacity="0",document.body.appendChild(l),l.focus(),setTimeout((()=>{e.focus(),document.body.removeChild(l)}),t)})(s)},this.handleToggleSearchDialog=()=>{var e;this.searchDialog&&(this.searchDialog.open?(this.searchDialog.close(),this.unblockPageScrolling(),null===(e=this.searchDialog.querySelector("reddit-search-small"))||void 0===e||e.dispatchEvent(new CustomEvent("clear-search-input")),this.trackEvent(n())):(this.searchDialog.show(),this.blockPageScrolling({node:o()}),this.focusOnSearchInput(),this.trackEvent(h())))}}addEventListenersToSlottedElements(){this.menuButton&&this.menuButton.addEventListener("click",this.handleClickMenu),this.searchButton&&this.searchButton.addEventListener("click",this.handleToggleSearchDialog),this.searchDialogCloseButton&&this.searchDialogCloseButton.addEventListener("click",this.handleToggleSearchDialog),this.shredditInteractableElement&&this.shredditInteractableElement.addEventListener("interactionEvent",this.closeMenu)}initializeSlottedElements(){var e,t,l,s,i,o,a,n,h,r,d,c,u;this.menuButton||(this.menuButton=this.querySelector("#navbar-menu-button")),this.menuDialog||(this.menuDialog=null!==(s=null===(l=null===(t=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("slot[name=reddit-header-hamburger-menu]"))||void 0===t?void 0:t.assignedElements({flatten:!0}))||void 0===l?void 0:l.find((e=>e.matches("faceplate-dialog#menu"))))&&void 0!==s?s:null),this.searchButton||(this.searchButton=this.querySelector("#expand-search-button")),this.searchDialog||(this.searchDialog=null!==(n=null===(a=null===(o=null===(i=this.shadowRoot)||void 0===i?void 0:i.querySelector("slot[name=reddit-search-dialog]"))||void 0===o?void 0:o.assignedElements({flatten:!0}))||void 0===a?void 0:a.find((e=>e.matches("faceplate-dialog#reddit-search-dialog"))))&&void 0!==n?n:null,this.searchDialogCloseButton||(this.searchDialogCloseButton=null!==(c=null===(d=null===(r=null===(h=this.searchDialog)||void 0===h?void 0:h.querySelector("reddit-search-small"))||void 0===r?void 0:r.shadowRoot)||void 0===d?void 0:d.querySelector("button.search-dialog-close"))&&void 0!==c?c:null)),this.menuDialog&&(this.shredditInteractableElement||(this.shredditInteractableElement=null===(u=this.menuDialog)||void 0===u?void 0:u.querySelector("shreddit-interactable-element")))}reset(){var e;this.unblockPageScrolling(),null===(e=this.menuDialog)||void 0===e||e.scrollTo(0,0)}static get styles(){return[r]}firstUpdated(){this.initialize()}async initialize(){await Promise.all([m("hamburger-menu"),m("search-small")]),this.initializeSlottedElements(),this.addEventListenersToSlottedElements()}render(){return d`\n <shreddit-async-loader bundleName="reddit_search_small"></shreddit-async-loader>\n <slot class="v2" name="reddit-header-hamburger-menu"></slot>\n <slot class="v2" name="reddit-search-dialog"></slot>\n <slot></slot>\n `}};g=t([l("reddit-header-small")],g),c("icon-logout",u`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M11.991 10.625H1v-1.25h10.991l-1.933-1.933.884-.884 3 3a.624.624 0 010 .884l-3 3-.884-.884 1.933-1.933zM15.375 1h-9.75A2.629 2.629 0 003 3.625v.792h1.25v-.792A1.377 1.377 0 015.625 2.25h9.75a1.377 1.377 0 011.375 1.375v12.75a1.377 1.377 0 01-1.375 1.375h-9.75a1.377 1.377 0 01-1.375-1.375v-.792H3v.792A2.63 2.63 0 005.625 19h9.75A2.63 2.63 0 0018 16.375V3.625A2.63 2.63 0 0015.375 1z"/></svg>`,u`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M10.1 11H1V9h9.1V7a.5.5 0 01.853-.354l3 3a.5.5 0 010 .708l-3 3A.5.5 0 0110.1 13v-2zm5.25-10h-9.7A2.653 2.653 0 003 3.65v1.133h2V3.65A.651.651 0 015.65 3h9.7a.65.65 0 01.65.65v12.7a.65.65 0 01-.65.65h-9.7a.65.65 0 01-.65-.65v-1.133H3v1.133A2.653 2.653 0 005.65 19h9.7A2.653 2.653 0 0018 16.35V3.65A2.653 2.653 0 0015.35 1z"/></svg>`);
